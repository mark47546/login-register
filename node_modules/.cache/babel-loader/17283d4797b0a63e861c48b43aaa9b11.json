{"ast":null,"code":"var _jsxFileName = \"/Users/marknpr/Documents/work/renthub/login-register/src/components/Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport validator from \"validator\";\nimport RegexPassword from \"../utils\";\nimport '../styles/signup.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Login(_ref) {\n  _s();\n\n  let {} = _ref;\n  const [values, setValues] = useState({\n    email: '',\n    password: ''\n  });\n  const [errors, setErrors] = useState({\n    email: false,\n    password: false,\n    fetchError: false,\n    fetchErrorMsg: ''\n  });\n\n  const handleChange = fieldName => e => {\n    const userValue = e.target.value;\n    let isCorrectValue = fieldName === 'email' ? validator.isEmail(userValue) : RegexPassword(userValue);\n    isCorrectValue ? setErrors({ ...errors,\n      [fieldName]: false\n    }) : setErrors({ ...errors,\n      [fieldName]: true\n    });\n    setValues({ ...values,\n      [fieldName]: e.target.value\n    });\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      const res = await fetch('/api/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: values.email,\n          password: values.password\n        })\n      });\n      alert('data');\n\n      if (!res.ok) {\n        const error = await res.json();\n        return setErrors({ ...errors,\n          fetchError: true,\n          fetchErrorMsg: error.msg\n        });\n      }\n\n      const data = await res.json();\n      console.log({\n        data\n      });\n      setErrors({ ...errors,\n        fetchError: true,\n        fetchErrorMsg: data.msg\n      });\n      setValues({\n        email: '',\n        password: ''\n      });\n      return;\n    } catch (error) {\n      setErrors({ ...errors,\n        fetchError: true,\n        fetchErrorMsg: 'There was a problem with our server, please try again later'\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          children: \"\\u0E2D\\u0E35\\u0E40\\u0E21\\u0E25\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          className: \"form-control\",\n          id: \"email\",\n          \"aria-describedby\": \"emailHelp\",\n          placeholder: \"\\u0E2D\\u0E35\\u0E40\\u0E21\\u0E25\",\n          value: values.email,\n          onChange: handleChange('email'),\n          error: errors.email.toString(),\n          helpertext: errors.email ? 'Please insert a valid email address' : undefined\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password-field\",\n          children: \"\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E1C\\u0E48\\u0E32\\u0E19\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          className: \"form-control\",\n          id: \"password\",\n          placeholder: \"\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E1C\\u0E48\\u0E32\\u0E19\",\n          value: values.password,\n          onChange: handleChange('password'),\n          error: errors.password.toString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        className: \"forgot\",\n        children: \"\\u0E25\\u0E37\\u0E21 Password?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary button\",\n        children: \"\\u0E40\\u0E02\\u0E49\\u0E32\\u0E2A\\u0E39\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E1A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n\n_s(Login, \"Hxcpv8o4+2nDkPq1mgXHvv1In+k=\");\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","validator","RegexPassword","Login","values","setValues","email","password","errors","setErrors","fetchError","fetchErrorMsg","handleChange","fieldName","e","userValue","target","value","isCorrectValue","isEmail","handleSubmit","preventDefault","res","fetch","method","headers","body","JSON","stringify","alert","ok","error","json","msg","data","console","log","toString","undefined"],"sources":["/Users/marknpr/Documents/work/renthub/login-register/src/components/Login.js"],"sourcesContent":["import React, {useState} from \"react\";\nimport validator from \"validator\";\nimport RegexPassword from \"../utils\";\nimport '../styles/signup.css'\n\nfunction Login({}){\n    const [values, setValues] = useState({\n        email:'',\n        password:'',\n    })\n\n    const [errors, setErrors] = useState({\n        email: false,\n        password: false,\n        fetchError: false,\n        fetchErrorMsg: '',\n    })\n\n    const handleChange = (fieldName) => (e) =>{\n        const userValue = e.target.value\n        let isCorrectValue = \n            fieldName === 'email'\n              ? validator.isEmail(userValue)\n              : RegexPassword(userValue)\n            isCorrectValue\n              ? setErrors({ ...errors, [fieldName]: false })\n              : setErrors({ ...errors, [fieldName]: true })\n            setValues({...values, [fieldName]: e.target.value})\n\n    }\n\n    const handleSubmit = async(e) => {\n        e.preventDefault()\n        try {\n            const res = await fetch('/api/login',{\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    email:values.email,\n                    password:values.password\n                })\n            })\n            alert('data')\n            if(!res.ok){\n                const error = await res.json()\n                return setErrors({\n                ...errors,\n                fetchError: true,\n                fetchErrorMsg: error.msg,\n                })\n            }\n\n            const data = await res.json()\n            console.log({data});\n            setErrors({\n                ...errors,\n                fetchError: true,\n                fetchErrorMsg: data.msg,\n            })\n\n            setValues({\n                email:'',\n                password:''\n            })\n            return \n        }  catch(error){\n            setErrors({\n                ...errors,\n                fetchError: true,\n                fetchErrorMsg:\n                  'There was a problem with our server, please try again later',\n            })\n        }\n    }\n\n    return (\n        <> \n        <form onSubmit={handleSubmit}>\n            <div className=\"form-group\">\n                <label htmlFor=\"email\">อีเมล</label>\n                <input type=\"email\" className=\"form-control\" id=\"email\" aria-describedby=\"emailHelp\" placeholder=\"อีเมล\" value={values.email} onChange={handleChange('email')} \n                error={errors.email.toString()} helpertext={errors.email ? 'Please insert a valid email address': undefined}/>\n            </div>\n            <div className=\"form-group\">\n                <label htmlFor=\"password-field\">รหัสผ่าน</label>\n                <input type={\"password\"} className=\"form-control\" id=\"password\" placeholder=\"รหัสผ่าน\" value={values.password} onChange={handleChange('password')} error={errors.password.toString()}/>\n            </div>\n            <a className=\"forgot\">ลืม Password?</a>\n            <button type=\"submit\" className=\"btn btn-primary button\">เข้าสู่ระบบ</button>\n        </form>  \n        \n       </>\n    )\n}\n\nexport default Login"],"mappings":"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"},"metadata":{},"sourceType":"module"}